<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: OAuth::Consumer
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "OAuth::Consumer";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (C)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../OAuth.html" title="OAuth (module)">OAuth</a></span></span>
     &raquo; 
    <span class="title">Consumer</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: OAuth::Consumer
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">OAuth::Consumer</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/oauth/consumer.rb</dd>
  </dl>
  
</div>


  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="CA_FILE-constant" class="">CA_FILE =
          
        </dt>
        <dd><pre class="code"><span class='kw'>nil</span></pre></dd>
      
        <dt id="default_options-classvariable" class="">@@default_options =
          
        </dt>
        <dd><pre class="code"><span class='const'>SnakyHash</span><span class='op'>::</span><span class='const'>SymbolKeyed</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
  <span class='lbrace'>{</span>
    <span class='comment'># Signature method used by server. Defaults to HMAC-SHA1
</span>    <span class='label'>signature_method:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HMAC-SHA1</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
     <span class='comment'># default paths on site. These are the same as the defaults set up by the generators
</span>    <span class='label'>request_token_path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/oauth/request_token</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>authenticate_path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/oauth/authenticate</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>authorize_path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/oauth/authorize</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>access_token_path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/oauth/access_token</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
     <span class='label'>proxy:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='comment'># How do we send the oauth values to the server see
</span>    <span class='comment'># https://oauth.net/core/1.0/#consumer_req_param for more info
</span>    <span class='comment'>#
</span>    <span class='comment'># Possible values:
</span>    <span class='comment'>#
</span>    <span class='comment'>#   :header - via the Authorize header (Default) ( option 1. in spec)
</span>    <span class='comment'>#   :body - url form encoded in body of POST request ( option 2. in spec)
</span>    <span class='comment'>#   :query_string - via the query part of the url ( option 3. in spec)
</span>    <span class='label'>scheme:</span> <span class='symbol'>:header</span><span class='comma'>,</span>
     <span class='comment'># Default http method used for OAuth Token Requests (defaults to :post)
</span>    <span class='label'>http_method:</span> <span class='symbol'>:post</span><span class='comma'>,</span>
     <span class='comment'># Add a custom ca_file for consumer
</span>    <span class='comment'># :ca_file       =&gt; &#39;/etc/certs.pem&#39;
</span>     <span class='comment'># Possible values:
</span>    <span class='comment'>#
</span>    <span class='comment'># nil, false - no debug output
</span>    <span class='comment'># true - uses $stdout
</span>    <span class='comment'># some_value - uses some_value
</span>    <span class='label'>debug_output:</span> <span class='kw'>nil</span><span class='comma'>,</span>
     <span class='comment'># Defaults to producing a body_hash as part of the signature but
</span>    <span class='comment'># can be disabled since it&#39;s not officially part of the OAuth 1.0
</span>    <span class='comment'># spec. Possible values are true and false
</span>    <span class='label'>body_hash_enabled:</span> <span class='kw'>true</span><span class='comma'>,</span>
     <span class='label'>oauth_version:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.0</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='rbrace'>}</span><span class='comma'>,</span>
<span class='rparen'>)</span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#http-instance_method" title="#http (instance method)">#<strong>http</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The HTTP object for the site.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#key-instance_method" title="#key (instance method)">#<strong>key</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute key.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#options-instance_method" title="#options (instance method)">#<strong>options</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute options.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#secret-instance_method" title="#secret (instance method)">#<strong>secret</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute secret.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#site-instance_method" title="#site (instance method)">#<strong>site</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#access_token_path-instance_method" title="#access_token_path (instance method)">#<strong>access_token_path</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#access_token_url-instance_method" title="#access_token_url (instance method)">#<strong>access_token_url</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#access_token_url%3F-instance_method" title="#access_token_url? (instance method)">#<strong>access_token_url?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#authenticate_path-instance_method" title="#authenticate_path (instance method)">#<strong>authenticate_path</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#authenticate_url-instance_method" title="#authenticate_url (instance method)">#<strong>authenticate_url</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#authenticate_url%3F-instance_method" title="#authenticate_url? (instance method)">#<strong>authenticate_url?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#authorize_path-instance_method" title="#authorize_path (instance method)">#<strong>authorize_path</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#authorize_url-instance_method" title="#authorize_url (instance method)">#<strong>authorize_url</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#authorize_url%3F-instance_method" title="#authorize_url? (instance method)">#<strong>authorize_url?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_signed_request-instance_method" title="#create_signed_request (instance method)">#<strong>create_signed_request</strong>(http_method, path, token = nil, request_options = {}, *arguments)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates and signs an http request.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#debug_output-instance_method" title="#debug_output (instance method)">#<strong>debug_output</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_access_token-instance_method" title="#get_access_token (instance method)">#<strong>get_access_token</strong>(request_token, request_options = {}, *arguments) {|response_body| ... } &#x21d2; OAuth::AccessToken </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Exchanges a verified Request Token for an Access Token.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_request_token-instance_method" title="#get_request_token (instance method)">#<strong>get_request_token</strong>(request_options = {}, *arguments) {|response_body| ... } &#x21d2; OAuth::RequestToken </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Makes a request to the service for a new OAuth::RequestToken.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#http_method-instance_method" title="#http_method (instance method)">#<strong>http_method</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The default http method.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(consumer_key, consumer_secret, options = {})  &#x21d2; Consumer </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create a new consumer instance by passing it a configuration hash:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#proxy-instance_method" title="#proxy (instance method)">#<strong>proxy</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#request-instance_method" title="#request (instance method)">#<strong>request</strong>(http_method, path, token = nil, request_options = {}, *arguments)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates, signs and performs an http request.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#request_endpoint-instance_method" title="#request_endpoint (instance method)">#<strong>request_endpoint</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#request_token_path-instance_method" title="#request_token_path (instance method)">#<strong>request_token_path</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#request_token_url-instance_method" title="#request_token_url (instance method)">#<strong>request_token_url</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>TODO: this is ugly, rewrite.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#request_token_url%3F-instance_method" title="#request_token_url? (instance method)">#<strong>request_token_url?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#scheme-instance_method" title="#scheme (instance method)">#<strong>scheme</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sign!-instance_method" title="#sign! (instance method)">#<strong>sign!</strong>(request, token = nil, request_options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sign the Request object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#signature_base_string-instance_method" title="#signature_base_string (instance method)">#<strong>signature_base_string</strong>(request, token = nil, request_options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return the signature_base_string.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#token_request-instance_method" title="#token_request (instance method)">#<strong>token_request</strong>(http_method, path, token = nil, request_options = {}, *arguments)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a request and parses the result as url_encoded.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uri-instance_method" title="#uri (instance method)">#<strong>uri</strong>(custom_uri = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Contains the root URI for this site.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(consumer_key, consumer_secret, options = {})  &#x21d2; <tt><span class='object_link'><a href="" title="OAuth::Consumer (class)">Consumer</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create a new consumer instance by passing it a configuration hash:</p>

<p>@consumer = OAuth::Consumer.new(key, secret, {<br />
    :site               =&gt; “http://term.ie”,<br />
    :scheme             =&gt; :header,<br />
    :http_method        =&gt; :post,<br />
    :request_token_path =&gt; “/oauth/example/request_token.php”,<br />
    :access_token_path  =&gt; “/oauth/example/access_token.php”,<br />
    :authorize_path     =&gt; “/oauth/example/authorize.php”,<br />
    :body_hash_enabled  =&gt; false<br />
   })</p>

<p>Start the process by requesting a token</p>

<p>@request_token = @consumer.get_request_token<br />
  session[:request_token] = @request_token<br />
  redirect_to @request_token.authorize_url</p>

<p>When user returns create an access_token</p>

<p>@access_token = @request_token.get_access_token<br />
  @photos=@access_token.get(‘/photos.xml’)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108
109
110
111
112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 106</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_consumer_key'>consumer_key</span><span class='comma'>,</span> <span class='id identifier rubyid_consumer_secret'>consumer_secret</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@key</span> <span class='op'>=</span> <span class='id identifier rubyid_consumer_key'>consumer_key</span>
  <span class='ivar'>@secret</span> <span class='op'>=</span> <span class='id identifier rubyid_consumer_secret'>consumer_secret</span>

  <span class='comment'># ensure that keys are symbols
</span>  <span class='id identifier rubyid_snaky_options'>snaky_options</span> <span class='op'>=</span> <span class='const'>SnakyHash</span><span class='op'>::</span><span class='const'>SymbolKeyed</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span> <span class='op'>=</span> <span class='cvar'>@@default_options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_snaky_options'>snaky_options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="http=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="http-instance_method">
  
    #<strong>http</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The HTTP object for the site. The HTTP Object is what you get when you do Net::HTTP.new</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


131
132
133</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 131</span>

<span class='kw'>def</span> <span class='id identifier rubyid_http'>http</span>
  <span class='ivar'>@http</span> <span class='op'>||=</span> <span class='id identifier rubyid_create_http'>create_http</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="key=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="key-instance_method">
  
    #<strong>key</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute key.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


80
81
82</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 80</span>

<span class='kw'>def</span> <span class='id identifier rubyid_key'>key</span>
  <span class='ivar'>@key</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="options=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="options-instance_method">
  
    #<strong>options</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute options.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


80
81
82</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 80</span>

<span class='kw'>def</span> <span class='id identifier rubyid_options'>options</span>
  <span class='ivar'>@options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="secret=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="secret-instance_method">
  
    #<strong>secret</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute secret.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


80
81
82</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 80</span>

<span class='kw'>def</span> <span class='id identifier rubyid_secret'>secret</span>
  <span class='ivar'>@secret</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="site=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="site-instance_method">
  
    #<strong>site</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


329
330
331</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 329</span>

<span class='kw'>def</span> <span class='id identifier rubyid_site'>site</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:site</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="access_token_path-instance_method">
  
    #<strong>access_token_path</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


355
356
357</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 355</span>

<span class='kw'>def</span> <span class='id identifier rubyid_access_token_path'>access_token_path</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:access_token_path</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="access_token_url-instance_method">
  
    #<strong>access_token_url</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


384
385
386</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 384</span>

<span class='kw'>def</span> <span class='id identifier rubyid_access_token_url'>access_token_url</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:access_token_url</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_site'>site</span> <span class='op'>+</span> <span class='id identifier rubyid_access_token_path'>access_token_path</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="access_token_url?-instance_method">
  
    #<strong>access_token_url?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


388
389
390</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 388</span>

<span class='kw'>def</span> <span class='id identifier rubyid_access_token_url?'>access_token_url?</span>
  <span class='ivar'>@options</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:access_token_url</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="authenticate_path-instance_method">
  
    #<strong>authenticate_path</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


347
348
349</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 347</span>

<span class='kw'>def</span> <span class='id identifier rubyid_authenticate_path'>authenticate_path</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:authenticate_path</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="authenticate_url-instance_method">
  
    #<strong>authenticate_url</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


368
369
370</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 368</span>

<span class='kw'>def</span> <span class='id identifier rubyid_authenticate_url'>authenticate_url</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:authenticate_url</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_site'>site</span> <span class='op'>+</span> <span class='id identifier rubyid_authenticate_path'>authenticate_path</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="authenticate_url?-instance_method">
  
    #<strong>authenticate_url?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


372
373
374</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 372</span>

<span class='kw'>def</span> <span class='id identifier rubyid_authenticate_url?'>authenticate_url?</span>
  <span class='ivar'>@options</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:authenticate_url</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="authorize_path-instance_method">
  
    #<strong>authorize_path</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


351
352
353</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 351</span>

<span class='kw'>def</span> <span class='id identifier rubyid_authorize_path'>authorize_path</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:authorize_path</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="authorize_url-instance_method">
  
    #<strong>authorize_url</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


376
377
378</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 376</span>

<span class='kw'>def</span> <span class='id identifier rubyid_authorize_url'>authorize_url</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:authorize_url</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_site'>site</span> <span class='op'>+</span> <span class='id identifier rubyid_authorize_path'>authorize_path</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="authorize_url?-instance_method">
  
    #<strong>authorize_url?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


380
381
382</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 380</span>

<span class='kw'>def</span> <span class='id identifier rubyid_authorize_url?'>authorize_url?</span>
  <span class='ivar'>@options</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:authorize_url</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_signed_request-instance_method">
  
    #<strong>create_signed_request</strong>(http_method, path, token = nil, request_options = {}, *arguments)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates and signs an http request.<br />
It’s recommended to use the Token classes to set this up correctly</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


274
275
276
277
278</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 274</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_signed_request'>create_signed_request</span><span class='lparen'>(</span><span class='id identifier rubyid_http_method'>http_method</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_token'>token</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_request_options'>request_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_request'>request</span> <span class='op'>=</span> <span class='id identifier rubyid_create_http_request'>create_http_request</span><span class='lparen'>(</span><span class='id identifier rubyid_http_method'>http_method</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sign!'>sign!</span><span class='lparen'>(</span><span class='id identifier rubyid_request'>request</span><span class='comma'>,</span> <span class='id identifier rubyid_token'>token</span><span class='comma'>,</span> <span class='id identifier rubyid_request_options'>request_options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_request'>request</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="debug_output-instance_method">
  
    #<strong>debug_output</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


120
121
122
123
124
125
126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 120</span>

<span class='kw'>def</span> <span class='id identifier rubyid_debug_output'>debug_output</span>
  <span class='ivar'>@debug_output</span> <span class='op'>||=</span> <span class='kw'>case</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:debug_output</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>false</span>
  <span class='kw'>when</span> <span class='kw'>true</span>
    <span class='gvar'>$stdout</span>
  <span class='kw'>else</span>
    <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:debug_output</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_access_token-instance_method">
  
    #<strong>get_access_token</strong>(request_token, request_options = {}, *arguments) {|response_body| ... } &#x21d2; <tt><span class='object_link'><a href="AccessToken.html" title="OAuth::AccessToken (class)">OAuth::AccessToken</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Exchanges a verified Request Token for an Access Token.</p>

<p>OAuth 1.0 vs 1.0a:</p>
<ul>
  <li>1.0a requires including oauth_verifier (as returned by the Provider after<br />
user authorization) when performing this exchange in a 3‑legged flow.</li>
  <li>1.0 flows did not include oauth_verifier.</li>
</ul>

<p>Usage (3‑legged):<br />
  access_token = request_token.get_access_token(oauth_verifier: params[:oauth_verifier])</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>request_token</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="RequestToken.html" title="OAuth::RequestToken (class)">OAuth::RequestToken</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The authorized request token</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>request_options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>OAuth or request options (include :oauth_verifier for 1.0a)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>arguments</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Optional POST body and headers</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>response_body</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If a block is given, yields the raw response body.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="AccessToken.html" title="OAuth::AccessToken (class)">OAuth::AccessToken</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


160
161
162
163
164
165
166
167
168
169
170</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 160</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_access_token'>get_access_token</span><span class='lparen'>(</span><span class='id identifier rubyid_request_token'>request_token</span><span class='comma'>,</span> <span class='id identifier rubyid_request_options'>request_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_token_request'>token_request</span><span class='lparen'>(</span>
    <span class='id identifier rubyid_http_method'>http_method</span><span class='comma'>,</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_access_token_url?'>access_token_url?</span> <span class='op'>?</span> <span class='id identifier rubyid_access_token_url'>access_token_url</span> <span class='op'>:</span> <span class='id identifier rubyid_access_token_path'>access_token_path</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='id identifier rubyid_request_token'>request_token</span><span class='comma'>,</span>
    <span class='id identifier rubyid_request_options'>request_options</span><span class='comma'>,</span>
    <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span><span class='comma'>,</span>
    <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
  <span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="../OAuth.html" title="OAuth (module)">OAuth</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="AccessToken.html" title="OAuth::AccessToken (class)">AccessToken</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_hash'><span class='object_link'><a href="ConsumerToken.html#from_hash-class_method" title="OAuth::ConsumerToken.from_hash (method)">from_hash</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_response'>response</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_request_token-instance_method">
  
    #<strong>get_request_token</strong>(request_options = {}, *arguments) {|response_body| ... } &#x21d2; <tt><span class='object_link'><a href="RequestToken.html" title="OAuth::RequestToken (class)">OAuth::RequestToken</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Makes a request to the service for a new OAuth::RequestToken</p>

<p>Example:<br />
  @request_token = @consumer.get_request_token</p>

<p>To include OAuth parameters:<br />
  @request_token = @consumer.get_request_token(<br />
    oauth_callback: “http://example.com/cb”<br />
  )</p>

<p>To include application-specific parameters:<br />
  @request_token = @consumer.get_request_token({}, foo: “bar”)</p>

<p>OAuth 1.0 vs 1.0a:</p>
<ul>
  <li>In 1.0a, the Consumer SHOULD send oauth_callback when obtaining a request token<br />
(or explicitly use OUT_OF_BAND) and the Provider MUST include<br />
oauth_callback_confirmed=true in the response.</li>
  <li>This library defaults oauth_callback to OUT_OF_BAND (“oob”) when not provided,<br />
which works for both 1.0 and 1.0a, and mirrors common provider behavior.</li>
  <li>The oauth_callback_confirmed response is parsed by the token classes; it is not<br />
part of the signature base string and thus is not signed.</li>
</ul>

<p>TODO: In a future major release, oauth_callback may be made mandatory unless<br />
      request_options[:exclude_callback] is set, to reflect 1.0a guidance.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>request_options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>OAuth options for the request. Notably<br />
:oauth_callback can be set to a URL, or OAuth::OUT_OF_BAND (“oob”).</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>arguments</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Optional POST body and headers</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>response_body</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If a block is given, yields the raw response body.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="RequestToken.html" title="OAuth::RequestToken (class)">OAuth::RequestToken</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 202</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_request_token'>get_request_token</span><span class='lparen'>(</span><span class='id identifier rubyid_request_options'>request_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='comment'># if oauth_callback wasn&#39;t provided, it is assumed that oauth_verifiers
</span>  <span class='comment'># will be exchanged out of band
</span>  <span class='id identifier rubyid_request_options'>request_options</span><span class='lbracket'>[</span><span class='symbol'>:oauth_callback</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="../OAuth.html" title="OAuth (module)">OAuth</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../OAuth.html#OUT_OF_BAND-constant" title="OAuth::OUT_OF_BAND (constant)">OUT_OF_BAND</a></span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_request_options'>request_options</span><span class='lbracket'>[</span><span class='symbol'>:exclude_callback</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span>
    <span class='id identifier rubyid_token_request'>token_request</span><span class='lparen'>(</span>
      <span class='id identifier rubyid_http_method'>http_method</span><span class='comma'>,</span>
      <span class='lparen'>(</span><span class='id identifier rubyid_request_token_url?'>request_token_url?</span> <span class='op'>?</span> <span class='id identifier rubyid_request_token_url'>request_token_url</span> <span class='op'>:</span> <span class='id identifier rubyid_request_token_path'>request_token_path</span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='kw'>nil</span><span class='comma'>,</span>
      <span class='id identifier rubyid_request_options'>request_options</span><span class='comma'>,</span>
      <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span><span class='comma'>,</span>
      <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
    <span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_token_request'>token_request</span><span class='lparen'>(</span>
      <span class='id identifier rubyid_http_method'>http_method</span><span class='comma'>,</span>
      <span class='lparen'>(</span><span class='id identifier rubyid_request_token_url?'>request_token_url?</span> <span class='op'>?</span> <span class='id identifier rubyid_request_token_url'>request_token_url</span> <span class='op'>:</span> <span class='id identifier rubyid_request_token_path'>request_token_path</span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='kw'>nil</span><span class='comma'>,</span>
      <span class='id identifier rubyid_request_options'>request_options</span><span class='comma'>,</span>
      <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span><span class='comma'>,</span>
    <span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='const'><span class='object_link'><a href="../OAuth.html" title="OAuth (module)">OAuth</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="RequestToken.html" title="OAuth::RequestToken (class)">RequestToken</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_hash'><span class='object_link'><a href="ConsumerToken.html#from_hash-class_method" title="OAuth::ConsumerToken.from_hash (method)">from_hash</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_response'>response</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="http_method-instance_method">
  
    #<strong>http_method</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The default http method</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


116
117
118</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 116</span>

<span class='kw'>def</span> <span class='id identifier rubyid_http_method'>http_method</span>
  <span class='ivar'>@http_method</span> <span class='op'>||=</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:http_method</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='symbol'>:post</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="proxy-instance_method">
  
    #<strong>proxy</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


392
393
394</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 392</span>

<span class='kw'>def</span> <span class='id identifier rubyid_proxy'>proxy</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:proxy</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="request-instance_method">
  
    #<strong>request</strong>(http_method, path, token = nil, request_options = {}, *arguments)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates, signs and performs an http request.<br />
It’s recommended to use the OAuth::Token classes to set this up correctly.<br />
request_options take precedence over consumer-wide options when signing<br />
  a request.<br />
arguments are POST and PUT bodies (a Hash, string-encoded parameters, or<br />
  absent), followed by additional HTTP headers.</p>

<p>@consumer.request(:get,  ‘/people’, @token, { :scheme =&gt; :query_string })<br />
  @consumer.request(:post, ‘/people’, @token, {}, @person.to_xml, { ‘Content-Type’ =&gt; ‘application/xml’ })</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 238</span>

<span class='kw'>def</span> <span class='id identifier rubyid_request'>request</span><span class='lparen'>(</span><span class='id identifier rubyid_http_method'>http_method</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_token'>token</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_request_options'>request_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>^/</span><span class='regexp_end'>}</span></span> <span class='op'>=~</span> <span class='id identifier rubyid_path'>path</span>
    <span class='ivar'>@http</span> <span class='op'>=</span> <span class='id identifier rubyid_create_http'>create_http</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
    <span class='id identifier rubyid__uri'>_uri</span> <span class='op'>=</span> <span class='const'>URI</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid__uri'>_uri</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>?</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid__uri'>_uri</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid__uri'>_uri</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># override the request with your own, this is useful for file uploads which Net::HTTP does not do
</span>  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='id identifier rubyid_create_signed_request'>create_signed_request</span><span class='lparen'>(</span><span class='id identifier rubyid_http_method'>http_method</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_token'>token</span><span class='comma'>,</span> <span class='id identifier rubyid_request_options'>request_options</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='symbol'>:done</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_rsp'>rsp</span> <span class='op'>=</span> <span class='id identifier rubyid_http'>http</span><span class='period'>.</span><span class='id identifier rubyid_request'>request</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='rparen'>)</span>
  <span class='comment'># check for an error reported by the Problem Reporting extension
</span>  <span class='comment'># (https://wiki.oauth.net/ProblemReporting)
</span>  <span class='comment'># note: a 200 may actually be an error; check for an oauth_problem key to be sure
</span>  <span class='kw'>if</span> <span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='id identifier rubyid_rsp'>rsp</span><span class='period'>.</span><span class='id identifier rubyid_to_hash'>to_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>www-authenticate</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span>
      <span class='lparen'>(</span><span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_grep'>grep</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^OAuth </span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='op'>&amp;&amp;</span>
      <span class='id identifier rubyid_h'>h</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>oauth_problem</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

    <span class='comment'># puts &quot;Header: #{h.first}&quot;
</span>
    <span class='comment'># TODO: doesn&#39;t handle broken responses from api.login.yahoo.com
</span>    <span class='comment'># remove debug code when done
</span>    <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../OAuth.html" title="OAuth (module)">OAuth</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Helper.html" title="OAuth::Helper (module)">Helper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_parse_header'><span class='object_link'><a href="Helper.html#parse_header-class_method" title="OAuth::Helper.parse_header (method)">parse_header</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_h'>h</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='rparen'>)</span>

    <span class='comment'># puts &quot;Params: #{params.inspect}&quot;
</span>    <span class='comment'># puts &quot;Body: #{rsp.body}&quot;
</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../OAuth.html" title="OAuth (module)">OAuth</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Problem.html" title="OAuth::Problem (class)">Problem</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Problem.html#initialize-instance_method" title="OAuth::Problem#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>oauth_problem</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_rsp'>rsp</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_rsp'>rsp</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="request_endpoint-instance_method">
  
    #<strong>request_endpoint</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


333
334
335
336
337</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 333</span>

<span class='kw'>def</span> <span class='id identifier rubyid_request_endpoint'>request_endpoint</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:request_endpoint</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:request_endpoint</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="request_token_path-instance_method">
  
    #<strong>request_token_path</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


343
344
345</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 343</span>

<span class='kw'>def</span> <span class='id identifier rubyid_request_token_path'>request_token_path</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:request_token_path</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="request_token_url-instance_method">
  
    #<strong>request_token_url</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>TODO: this is ugly, rewrite</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


360
361
362</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 360</span>

<span class='kw'>def</span> <span class='id identifier rubyid_request_token_url'>request_token_url</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:request_token_url</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_site'>site</span> <span class='op'>+</span> <span class='id identifier rubyid_request_token_path'>request_token_path</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="request_token_url?-instance_method">
  
    #<strong>request_token_url?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


364
365
366</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 364</span>

<span class='kw'>def</span> <span class='id identifier rubyid_request_token_url?'>request_token_url?</span>
  <span class='ivar'>@options</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:request_token_url</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="scheme-instance_method">
  
    #<strong>scheme</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


339
340
341</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 339</span>

<span class='kw'>def</span> <span class='id identifier rubyid_scheme'>scheme</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:scheme</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sign!-instance_method">
  
    #<strong>sign!</strong>(request, token = nil, request_options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Sign the Request object. Use this if you have an externally generated http request object you want to sign.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


320
321
322</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 320</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sign!'>sign!</span><span class='lparen'>(</span><span class='id identifier rubyid_request'>request</span><span class='comma'>,</span> <span class='id identifier rubyid_token'>token</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_request_options'>request_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_oauth!'>oauth!</span><span class='lparen'>(</span><span class='id identifier rubyid_http'>http</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_token'>token</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_request_options'>request_options</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="signature_base_string-instance_method">
  
    #<strong>signature_base_string</strong>(request, token = nil, request_options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return the signature_base_string</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


325
326
327</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 325</span>

<span class='kw'>def</span> <span class='id identifier rubyid_signature_base_string'>signature_base_string</span><span class='lparen'>(</span><span class='id identifier rubyid_request'>request</span><span class='comma'>,</span> <span class='id identifier rubyid_token'>token</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_request_options'>request_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_signature_base_string'>signature_base_string</span><span class='lparen'>(</span><span class='id identifier rubyid_http'>http</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_token'>token</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_request_options'>request_options</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="token_request-instance_method">
  
    #<strong>token_request</strong>(http_method, path, token = nil, request_options = {}, *arguments)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a request and parses the result as url_encoded. This is used internally for the RequestToken and AccessToken requests.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 281</span>

<span class='kw'>def</span> <span class='id identifier rubyid_token_request'>token_request</span><span class='lparen'>(</span><span class='id identifier rubyid_http_method'>http_method</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_token'>token</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_request_options'>request_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_request_options'>request_options</span><span class='lbracket'>[</span><span class='symbol'>:token_request</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_request'>request</span><span class='lparen'>(</span><span class='id identifier rubyid_http_method'>http_method</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_token'>token</span><span class='comma'>,</span> <span class='id identifier rubyid_request_options'>request_options</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_code'>code</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>

  <span class='kw'>when</span> <span class='lparen'>(</span><span class='int'>200</span><span class='op'>..</span><span class='int'>299</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
      <span class='kw'>yield</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span>
    <span class='kw'>else</span>
      <span class='comment'># symbolize keys
</span>      <span class='comment'># TODO this could be considered unexpected behavior; symbols or not?
</span>      <span class='comment'># TODO this also drops subsequent values from multi-valued keys
</span>      <span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each_with_object'>each_with_object</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_h'>h</span><span class='op'>|</span>
        <span class='id identifier rubyid_h'>h</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
        <span class='id identifier rubyid_h'>h</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>when</span> <span class='lparen'>(</span><span class='int'>300</span><span class='op'>..</span><span class='int'>399</span><span class='rparen'>)</span>
    <span class='comment'># Parse redirect to follow
</span>    <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='const'>URI</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>location</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_our_uri'>our_uri</span> <span class='op'>=</span> <span class='const'>URI</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_site'>site</span><span class='rparen'>)</span>

    <span class='comment'># Guard against infinite redirects
</span>    <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_error!'>error!</span> <span class='kw'>if</span> <span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span> <span class='op'>==</span> <span class='id identifier rubyid_path'>path</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_our_uri'>our_uri</span><span class='period'>.</span><span class='id identifier rubyid_host'>host</span> <span class='op'>==</span> <span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_host'>host</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span> <span class='op'>==</span> <span class='id identifier rubyid_path'>path</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_our_uri'>our_uri</span><span class='period'>.</span><span class='id identifier rubyid_host'>host</span> <span class='op'>!=</span> <span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_host'>host</span>
      <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:site</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_scheme'>scheme</span><span class='embexpr_end'>}</span><span class='tstring_content'>://</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_host'>host</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='ivar'>@http</span> <span class='op'>=</span> <span class='id identifier rubyid_create_http'>create_http</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_token_request'>token_request</span><span class='lparen'>(</span><span class='id identifier rubyid_http_method'>http_method</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_token'>token</span><span class='comma'>,</span> <span class='id identifier rubyid_request_options'>request_options</span><span class='comma'>,</span> <span class='id identifier rubyid_arguments'>arguments</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='lparen'>(</span><span class='int'>400</span><span class='op'>..</span><span class='int'>499</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../OAuth.html" title="OAuth (module)">OAuth</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Unauthorized.html" title="OAuth::Unauthorized (class)">Unauthorized</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_response'>response</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_error!'>error!</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="uri-instance_method">
  
    #<strong>uri</strong>(custom_uri = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Contains the root URI for this site</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


136
137
138
139
140
141
142
143</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oauth/consumer.rb', line 136</span>

<span class='kw'>def</span> <span class='id identifier rubyid_uri'>uri</span><span class='lparen'>(</span><span class='id identifier rubyid_custom_uri'>custom_uri</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_custom_uri'>custom_uri</span>
    <span class='ivar'>@uri</span> <span class='op'>=</span> <span class='id identifier rubyid_custom_uri'>custom_uri</span>
    <span class='ivar'>@http</span> <span class='op'>=</span> <span class='id identifier rubyid_create_http'>create_http</span> <span class='comment'># yike, oh well. less intrusive this way
</span>  <span class='kw'>else</span> <span class='comment'># if no custom passed, we use existing, which, if unset, is set to site uri
</span>    <span class='ivar'>@uri</span> <span class='op'>||=</span> <span class='const'>URI</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_site'>site</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sat Sep 20 17:55:02 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.4.5).
</div>

    </div>
  </body>
</html>